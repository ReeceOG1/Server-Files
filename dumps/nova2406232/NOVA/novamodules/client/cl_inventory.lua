--NOVA Studios



local a=false;local b=false;local b=false;local c=false;local d=false;local e=0.00;local f=0;local g=0.00;local h=nil;local i=nil;local j=nil;local k=false;local l=nil;local m=0;local n=0;local o=false;local o=false;local o=false;local o=GetHashKey("prop_poly_bag_money")local o=false;local o=nil;local p=false;local q=nil;local r=false;local s=nil;local t=GetHashKey('xs_prop_arena_bag_01')local u=false;local v={["9mm Bullets"]=true,["50 CAL"]=true,["12 Gauge Pellets"]=true,["12 Gauge"]=true,["7.62mm Bullets"]=true,[".308 Sniper Rounds"]=true,["5.56mm NATO"]=true,[".357 Bullets"]=true,["Police Issued 5.56mm"]=true,["Police Issued .308 Sniper Rounds"]=true,["Police Issued 9mm"]=true,["Police Issued 12 Gauge"]=true}local w=math.rad;local x=math.cos;local y=math.sin;local z=math.abs;local function A(a)local b=w(a.x)local a=w(a.z)return vector3(-y(a)*z(x(b)),x(a)*z(x(b)),y(b))end;function RayCastGamePlayCamera(a)local b=GetGameplayCamRot()local c=GetGameplayCamCoord()local b=A(b)local a={x=c.x+b.x*a,y=c.y+b.y*a,z=c.z+b.z*a}local a,a,b,c,c=GetShapeTestResult(StartShapeTestRay(c.x,c.y,c.z,a.x,a.y,a.z,-1,-1,1))return a,b,c end;local function w()local a,b,b,b,b=GetShapeTestResult(shapeTestHandle)if a~=1 then if a==2 then Entity=b;EntityType=GetEntityType(b)end;local a=GetGameplayCamRot()local b=GetGameplayCamCoord()local a=A(a)local a=vector3(b.x+a.x*6.0,b.y+a.y*6.0,b.z+a.z*6.0)shapeTestHandle=StartShapeTestLosProbe(b.x,b.y,b.z,a.x,a.y,a.z,-1,-1,1)end end;Citizen.CreateThread(function()while true do Wait(0)if p then local a=GetEntityCoords(PlayerPedId())hit2,coords2,Entity2=RayCastGamePlayCamera(6.0)EntityType2=GetEntityType(Entity2)if EntityType2 and EntityType2==3 then local b=GetEntityModel(Entity2)if b==t and IsPedInAnyVehicle(GetPlayerPed(-1),false)==false then local c=#(a-coords2)if c<=2.5 and IsControlJustReleased(1,38)then TriggerEvent("NOVA:startCombatTimer",60)q=GetClosestObjectOfType(a,2.5,t,false,false,false)r=ObjToNet(q)TriggerServerEvent('NOVA:LootBag',r,c,b)if clockedon then Wait(1000)DeleteEntity(q)end end end end end end end)Citizen.CreateThread(function()while true do Wait(0)if p and clockedon then local a=GetEntityCoords(PlayerPedId())hit2,coords2,Entity2=RayCastGamePlayCamera(6.0)EntityType2=GetEntityType(Entity2)if EntityType2 and EntityType2==3 then local b=GetEntityModel(Entity2)if b==t and IsPedInAnyVehicle(GetPlayerPed(-1),false)==false then local c=#(a-coords2)if c<=2.5 and IsControlJustReleased(1,38)then TriggerEvent("NOVA:startCombatTimer",60)q=GetClosestObjectOfType(a,2.5,t,false,false,false)r=ObjToNet(q)TriggerServerEvent('NOVA:LootBag',r,c,b)Wait(1000)DeleteEntity(q)end end end end end end)function sortAlphabetically(a)local b={}for a,c in pairsByKeys(a)do table.insert(b,{title=a,value=c})end;a=b;return a end;function pairsByKeys(a,b)local c={}for a in pairs(a)do table.insert(c,a)end;table.sort(c,b)local b=0;local a=function()b=b+1;if c[b]==nil then return nil else return c[b],a[c[b]]end end;return a end;local w=nil;local x=nil;local y=nil;local z=false;o=nil;local A=false;Citizen.CreateThread(function()while true do if IsControlJustPressed(0,182)then if IsUsingKeyboard(2)and not tNOVA.isInComa()then if not k then TriggerServerEvent('NOVA:FetchPersonalInventory')a=not a;b=false;TriggerEvent("NOVA:AllowWeap",a)if a then setCursor(1)else setCursor(0)inGUINOVA=false;if w then tNOVA.vc_closeDoor(x,5)TriggerEvent('NOVA:clCloseTrunk')end;o=nil end else tNOVA.notify("~r~Cannot open inventory right before a restart!")end end end;Wait(0)end end)NOVAItemList={}NOVASecondItemList={}function tNOVA.getSpaceInFirstChest()return f-e end;function tNOVA.getSpaceInSecondChest()local a=0;if next(NOVASecondItemList)==nil then return g else for b,b in pairs(NOVASecondItemList)do a=a+b.amount*b.Weight end;return g-a end end;RegisterNetEvent("NOVA:FetchPersonalInventory",function(a,b,c)NOVAItemList=a;e=b;f=c end)RegisterNetEvent("NOVA:SendSecondaryInventoryData",function(a,b,b)NOVASecondItemList=a;g=b;d=true;setCursor(1)if b then i=b;j=GetEntityCoords(tNOVA.getPlayerPed())if b=="notmytrunk"then l=GetEntityCoords(tNOVA.getPlayerPed())end;if string.match(b,"player_")then n=string.gsub(b,"player_","")else n=0 end end end)RegisterNetEvent("NOVA:closeToRestart",function(b)k=true;Citizen.CreateThread(function()while true do NOVASecondItemList={}d=false;a=false;setCursor(0)Wait(50)end end)end)RegisterNetEvent("NOVA:closeSecondInventory",function()NOVASecondItemList={}d=false;a=false;i=nil;setCursor(0)end)Citizen.CreateThread(function()while true do if h~=nil and d then local a=GetEntityCoords(tNOVA.getPlayerPed())local b=GetEntityCoords(h)local a=#(a-b)if a>10.0 then TriggerEvent("NOVA:clCloseTrunk")TriggerServerEvent("NOVA:closeChest")end end;if i=="house"and d then local a=GetEntityCoords(tNOVA.getPlayerPed())local b=j;local a=#(a-b)if a>5.0 then TriggerEvent("NOVA:clCloseTrunk")TriggerServerEvent("NOVA:closeChest")end end;if i=="notmytrunk"and d then local a=GetEntityCoords(tNOVA.getPlayerPed())local b=l;local a=#(a-b)if a>5.0 then TriggerEvent("NOVA:clCloseTrunk")TriggerServerEvent("NOVA:closeChest")end end;if n~=0 and d then local a=GetEntityCoords(tNOVA.getPlayerPed())local b=GetEntityCoords(GetPlayerPed(GetPlayerFromServerId(tonumber(n))))local a=#(a-b)if a>5.0 then TriggerEvent("NOVA:clCloseTrunk")TriggerServerEvent("NOVA:closeChest")end end;if h==nil and i=="trunk"then d=false;a=false end;Wait(500)end end)Citizen.CreateThread(function()while true do if a then DrawRect(0.5,0.53,0.572,0.508,0,0,0,150)DrawAdvancedText(0.593,0.242,0.005,0.0028,0.66,"NOVA Inventory",255,255,255,255,7,0)DrawRect(0.5,0.24,0.572,0.058,0,0,0,225)DrawRect(0.342,0.536,0.215,0.436,0,0,0,150)DrawRect(0.652,0.537,0.215,0.436,0,0,0,150)if u then DrawAdvancedText(0.575,0.364,0.005,0.0028,0.325,"Use",255,255,255,255,6,0)DrawAdvancedText(0.615,0.364,0.005,0.0028,0.325,"Use All",255,255,255,255,6,0)else DrawAdvancedText(0.594,0.364,0.005,0.0028,0.4,"Use",255,255,255,255,6,0)end;DrawAdvancedText(0.594,0.454,0.005,0.0028,0.4,"Move",255,255,255,255,6,0)DrawAdvancedText(0.575,0.545,0.005,0.0028,0.325,"Move X",255,255,255,255,6,0)DrawAdvancedText(0.615,0.545,0.005,0.0028,0.325,"Move All",255,255,255,255,6,0)DrawAdvancedText(0.595,0.634,0.005,0.0028,0.35,"Give to Nearest Player",255,255,255,255,6,0)DrawAdvancedText(0.594,0.722,0.005,0.0028,0.4,"Trash",255,255,255,255,6,0)DrawAdvancedText(0.488,0.335,0.005,0.0028,0.366,"Amount",255,255,255,255,4,0)DrawAdvancedText(0.404,0.335,0.005,0.0028,0.366,"Item Name",255,255,255,255,4,0)DrawAdvancedText(0.521,0.335,0.005,0.0028,0.366,"Weight",255,255,255,255,4,0)DrawAdvancedText(0.833,0.776,0.005,0.0028,0.288,"[Press L to close]",255,255,255,255,4,0)DrawRect(0.5,0.273,0.572,0.0069999999999999,0,168,255,150)inGUINOVA=true;if not d then DrawAdvancedText(0.751,0.525,0.005,-0.027,0.6,"2nd Inventory not available",255,255,255,118,6,0)elseif(i~=nil)then DrawAdvancedText(0.798,0.335,0.005,0.0028,0.366,"Amount",255,255,255,255,4,0)DrawAdvancedText(0.714,0.335,0.005,0.0028,0.366,"Item Name",255,255,255,255,4,0)DrawAdvancedText(0.831,0.335,0.005,0.0028,0.366,"Weight",255,255,255,255,4,0)local a=0.026;local d=0.026;local e=0;local f=0;local h=sortAlphabetically(NOVASecondItemList)for g,g in pairs(h)do local h=g.title;local g=g['value']local g,i,j=g.ItemName,g.amount,g.Weight;f=f+(i*j)DrawAdvancedText(0.714,0.36+(e*d),0.005,0.0028,0.366,g,255,255,255,255,4,0)DrawAdvancedText(0.831,0.36+(e*d),0.005,0.0028,0.366,tostring(j*i).."kg",255,255,255,255,4,0)DrawAdvancedText(0.798,0.36+(e*d),0.005,0.0028,0.366,i,255,255,255,255,4,0)if CursorInArea(0.5443,0.7584,0.3435+(e*d),0.369+(e*d))then DrawRect(0.652,0.331+(a*(e+1)),0.215,0.026,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then c=h;b=false;m=i;selectedItemWeight=j;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end end elseif(h==c)then DrawRect(0.652,0.331+(a*(e+1)),0.215,0.026,0,168,255,150)end;e=e+1 end;if((f/g)>0.5)then if((f/g)>0.9)then DrawAdvancedText(0.826,0.307,0.005,0.0028,0.366,"Weight: "..f.."/"..g.."kg",255,50,0,255,4,0)else DrawAdvancedText(0.826,0.307,0.005,0.0028,0.366,"Weight: "..f.."/"..g.."kg",255,165,0,255,4,0)end else DrawAdvancedText(0.826,0.307,0.005,0.0028,0.366,"Weight: "..f.."/"..g.."kg",255,255,153,255,4,0)end end;if u then if CursorInArea(0.46,0.496,0.33,0.383)then DrawRect(0.48,0.359,0.0375,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if b then TriggerServerEvent("NOVA:UseItem",b,"Plr")elseif(c and(i~=nil)and d)then NOVAclient.useInventoryItem({c})else tNOVA.notify("~r~No item selected!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.48,0.359,0.0375,0.056,0,0,0,150)end;if CursorInArea(0.501,0.536,0.329,0.381)then DrawRect(0.52,0.359,0.0375,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if b then TriggerServerEvent("NOVA:UseAllItem",b,"Plr")elseif(c and(i~=nil)and d)then vRRclient.useInventoryItem({c})else tNOVA.notify("~r~No item selected!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.52,0.359,0.0375,0.056,0,0,0,150)end elseif CursorInArea(0.4598,0.5333,0.3283,0.3848)then DrawRect(0.5,0.36,0.075,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if b then TriggerServerEvent("NOVA:UseItem",b,"Plr")elseif(c and(i~=nil)and d)then else tNOVA.notify("~r~No item selected!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.5,0.36,0.075,0.056,0,0,0,150)end;if CursorInArea(0.4598,0.5333,0.418,0.4709)then DrawRect(0.5,0.45,0.075,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if d then if(b and(i~=nil)and d)then if(tNOVA.getPlayerCombatTimer()>0)then tNOVA.notify("~r~You can not store items whilst in combat.")elseif(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItem","Plr",b,x,false)elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItem","Plr",b,"home",false)elseif z then TriggerServerEvent("NOVA:MoveItem","Plr",b,"LootBag",true)end elseif(c and(i~=nil)and d)then if(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItem",o,c,x,false)elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItem",o,c,"home",false)else TriggerServerEvent("NOVA:MoveItem","LootBag",c,r,true)end else tNOVA.notify("~r~No item selected!")end else tNOVA.notify("~r~No second inventory available!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.5,0.45,0.075,0.056,0,0,0,150)end;if CursorInArea(0.4598,0.498,0.5042,0.5666)then DrawRect(0.48,0.54,0.0375,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)local a=tonumber(GetInvAmountText())or 1;if not lockInventorySoUserNoSpam then if d then if(b and(i~=nil)and d)then if(tNOVA.getPlayerCombatTimer()>0)then tNOVA.notify("~r~You can not store items whilst in combat.")elseif(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItemX","Plr",b,y,false,a)elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItemX","Plr",b,"home",false,a)elseif z then TriggerServerEvent("NOVA:MoveItemX","Plr",b,"LootBag",true,a)end elseif(c and(i~=nil)and d)then if(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItemX",o,c,y,false,a)elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItemX",o,c,"home",false,a)else TriggerServerEvent("NOVA:MoveItemX","LootBag",c,r,true,a)end else tNOVA.notify("~r~No item selected!")end else tNOVA.notify("~r~No second inventory available!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.48,0.54,0.0375,0.056,0,0,0,150)end;if CursorInArea(0.5004,0.5333,0.5042,0.5666)then DrawRect(0.52,0.54,0.0375,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if d then if(b and(i~=nil)and d)then local a=tNOVA.getSpaceInSecondChest()local c=m;if((m*selectedItemWeight)>a)then c=math.floor(a/selectedItemWeight)end;if(c>0)then if(tNOVA.getPlayerCombatTimer()>0)then tNOVA.notify("~r~You can not store items whilst in combat.")elseif(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItemAll","Plr",b,x,false)elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItemAll","Plr",b,"home")elseif z then TriggerServerEvent("NOVA:MoveItemAll","Plr",b,"LootBag")end else tNOVA.notify("~r~Not enough space in secondary chest!")end elseif(c and(i~=nil)and d)then local a=tNOVA.getSpaceInFirstChest()local b=m;if((m*selectedItemWeight)>a)then b=math.floor(a/selectedItemWeight)end;if(b>0)then if(o=="CarBoot")then TriggerServerEvent("NOVA:MoveItemAll",o,c,x,NetworkGetNetworkIdFromEntity(tNOVA.getNearestVehicle(3)))elseif(o=="Housing")then TriggerServerEvent("NOVA:MoveItemAll",o,c,"home")else TriggerServerEvent("NOVA:MoveItemAll","LootBag",c,r)end else tNOVA.notify("~r~Not enough space in secondary chest!")end else tNOVA.notify("~r~No item selected!")end else tNOVA.notify("~r~No second inventory available!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.52,0.54,0.0375,0.056,0,0,0,150)end;if CursorInArea(0.4598,0.5333,0.5931,0.6477)then DrawRect(0.5,0.63,0.075,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if b then TriggerServerEvent("NOVA:GiveItem",b,"Plr")elseif c then NOVAclient.giveToNearestPlayer({c})else tNOVA.notify("~r~No item selected!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.5,0.63,0.075,0.056,0,0,0,150)end;if CursorInArea(0.4598,0.5333,0.6831,0.7377)then DrawRect(0.5,0.72,0.075,0.056,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)if not lockInventorySoUserNoSpam then if b then TriggerServerEvent("NOVA:TrashItem",b,"Plr")elseif c then tNOVA.notify("~r~Please move the item to your inventory in order to trash")else tNOVA.notify("~r~No item selected!")end end;lockInventorySoUserNoSpam=true;Citizen.CreateThread(function()Wait(250)lockInventorySoUserNoSpam=false end)end else DrawRect(0.5,0.72,0.075,0.056,0,0,0,150)end;local a=0.026;local d=0.026;local e=0;local g=0;local h=sortAlphabetically(NOVAItemList)for f,f in pairs(h)do local h=f.title;local f=f['value']local f,i,j=f.ItemName,f.amount,f.Weight;g=g+(i*j)DrawAdvancedText(0.404,0.36+(e*d),0.005,0.0028,0.366,f,255,255,255,255,4,0)DrawAdvancedText(0.521,0.36+(e*d),0.005,0.0028,0.366,tostring(j*i).."kg",255,255,255,255,4,0)DrawAdvancedText(0.488,0.36+(e*d),0.005,0.0028,0.366,i,255,255,255,255,4,0)if CursorInArea(0.2343,0.4484,0.3435+(e*d),0.369+(e*d))then DrawRect(0.342,0.331+(a*(e+1)),0.215,0.026,0,168,255,150)if(IsControlJustPressed(1,329)or IsDisabledControlJustPressed(1,329))then PlaySound(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",0,0,1)b=h;if v[b]then u=true else u=false end;m=i;selectedItemWeight=j;c=false end elseif(h==b)then DrawRect(0.342,0.331+(a*(e+1)),0.215,0.026,0,168,255,150)end;e=e+1 end;if((g/f)>0.5)then if((g/f)>0.9)then DrawAdvancedText(0.516,0.307,0.005,0.0028,0.366,"Weight: "..g.."/"..f.."kg",255,50,0,255,4,0)else DrawAdvancedText(0.516,0.307,0.005,0.0028,0.366,"Weight: "..g.."/"..f.."kg",255,165,0,255,4,0)end else DrawAdvancedText(0.516,0.307,0.005,0.0028,0.366,"Weight: "..g.."/"..f.."kg",255,255,255,255,4,0)end end;Wait(0)end end)Citizen.CreateThread(function()while true do if(GetEntityHealth(tNOVA.getPlayerPed())<=102)then NOVASecondItemList={}d=false;a=false;inGUINOVA=false;setCursor(0)end;Wait(50)end end)function GetInvAmountText()AddTextEntry("FMMC_MPM_NA","Enter amount: (Blank to cancel)")DisplayOnscreenKeyboard(1,"FMMC_MPM_NA","Enter amount: (Blank to cancel)","","","","",30)while UpdateOnscreenKeyboard()==0 do DisableAllControlActions(0)Wait(0)end;if GetOnscreenKeyboardResult()then local a=GetOnscreenKeyboardResult()return a end;return nil end;Citizen.CreateThread(function()while true do Wait(250)if w then if(#(w-GetEntityCoords(PlayerPedId()))>8)then setCursor(0)a=false;inGUINOVA=false;tNOVA.vc_closeDoor(x,5)w=nil;x=nil;y=nil;o=nil end end;if a then if tNOVA.isInComa()then a=false;o=nil;if w then tNOVA.vc_closeDoor(x,5)w=nil;x=nil;y=nil end end end end end)function LoadAnimDict(a)while not HasAnimDictLoaded(a)do RequestAnimDict(a)Citizen.Wait(5)end end;RegisterNetEvent("NOVA:LockPick2")AddEventHandler("NOVA:LockPick2",function()TriggerServerEvent("NOVA:ACBan#76")end)RegisterNetEvent("NOVA:InventoryOpen")AddEventHandler("NOVA:InventoryOpen",function(b,c)z=c;if b then LoadAnimDict('amb@medic@standing@kneel@base')LoadAnimDict('anim@gangops@facility@servers@bodysearch@')TaskPlayAnim(PlayerPedId(),"amb@medic@standing@kneel@base","base",8.0,-8.0,-1,1,0,false,false,false)tNOVA.playAnim(true,{{"anim@gangops@facility@servers@bodysearch@","player_search",1}},true)exports.rprogress:Start("",2000)TriggerServerEvent("NOVA:FetchPersonalInventory")a=true;z=true else TriggerServerEvent("NOVA:CloseLootbag")TriggerServerEvent("NOVA:FetchPersonalInventory")z=false;SetNuiFocus(false,false)SetNuiFocusKeepInput(false)bagid=nil;setCursor(0)inGUINOVA=false;o=nil;ClearPedTasks(PlayerPedId())RemoveAnimDict("amb@medic@standing@kneel@base")RemoveAnimDict("anim@gangops@facility@servers@bodysearch@")d=false;s=false;p=false;q=nil;r=nil end;if z then FreezeEntityPosition(PlayerPedId(),true)TriggerEvent("NOVA:PlaySound","zipper")LoadAnimDict("amb@medic@standing@kneel@base")LoadAnimDict("anim@gangops@facility@servers@bodysearch@")TaskPlayAnim(PlayerPedId(),"amb@medic@standing@kneel@base","base",8,-8,-1,1,0,false,false,false)TaskPlayAnim(PlayerPedId(),"anim@gangops@facility@servers@bodysearch@","player_search",8,-8,-1,48,0,false,false,false)Wait(10000)if not IsPedSittingInAnyVehicle(PlayerPedId())then ClearPedTasksImmediately(PlayerPedId())end end end)RegisterNetEvent("NOVA:OpenHomeStorage")AddEventHandler("NOVA:OpenHomeStorage",function(b,c)if(b==true)then o="Housing"a=true;setCursor(1)TriggerServerEvent("NOVA:FetchHouseInventory",c)else o=nil;a=false;setCursor(0)end end)RegisterNetEvent("NOVA:SetLootbagFalse")AddEventHandler("NOVA:SetLootbagFalse",function(a)d=a end)Citizen.CreateThread(function()while true do Wait(75)if not PlayerInComa then local a=GetEntityCoords(PlayerPedId())if DoesObjectOfTypeExistAtCoords(a,2.5,t,true)then if not p then p=true;q=GetClosestObjectOfType(a,2.5,t,false,false,false)r=ObjToNet(q)s=GetEntityCoords(q)end else s=false;p=false;q=nil;r=nil end end end end)AddEventHandler("NOVA:clCloseTrunk",function()local b,c,e=tNOVA.getNearestOwnedVehicle(3.5)if b and IsPedInAnyVehicle(GetPlayerPed(-1),false)==false then tNOVA.vc_closeDoor(c,5)d=false;a=false;i=nil;setCursor(0)h=nil;inGUINOVA=false;a=false end end)AddEventHandler("NOVA:clOpenTrunk",function()local b,c,d=tNOVA.getNearestOwnedVehicle(3.5)y=c;x=d;a=true;if b and IsPedInAnyVehicle(GetPlayerPed(-1),false)==false then w=GetEntityCoords(PlayerPedId())tNOVA.vc_openDoor(c,5)o='CarBoot'TriggerServerEvent('NOVA:FetchPersonalInventory')TriggerServerEvent('NOVA:FetchTrunkInventory',x)else tNOVA.notify("~r~You don't have the keys to this vehicle!")end end)local a=false;local b=false;local c=false;local d=GetHashKey("prop_poly_bag_money")Citizen.CreateThread(function()while true do Wait(0)if not PlayerInComa then local e=PlayerPedId()local f=GetEntityCoords(e)if DoesObjectOfTypeExistAtCoords(f,1.5,d,true)then if not a then a=true;b=GetClosestObjectOfType(f,1.5,d,false,false,false)c=ObjToNet(b)end else a=false;b=nil;c=nil end;if a then if IsControlJustPressed(0,38)then if not IsPedSittingInAnyVehicle(e)then TriggerServerEvent('NOVA:CollectMoney',c)else Notify("~r~You cannot be in a vehicle!")end end end end end end)function func_disableGuiControls()if inGUINOVA then DisableControlAction(0,1,true)DisableControlAction(0,2,true)DisableControlAction(0,25,true)DisableControlAction(0,106,true)DisableControlAction(0,24,true)DisableControlAction(0,140,true)DisableControlAction(0,141,true)DisableControlAction(0,142,true)DisableControlAction(0,257,true)DisableControlAction(0,263,true)DisableControlAction(0,264,true)DisableControlAction(0,12,true)DisableControlAction(0,14,true)DisableControlAction(0,15,true)DisableControlAction(0,16,true)DisableControlAction(0,17,true)end end;CreateThread(function()while true do Wait(1)func_disableGuiControls()end end)