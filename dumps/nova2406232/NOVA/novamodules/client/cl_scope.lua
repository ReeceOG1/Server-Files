--NOVA Studios



local function a()local a=GetResourceKvpString("nova_scope_horizontal")if a==nil or a==""then return 50 else return tonumber(a)end end;local b={}local a=a()for a=1,100 do table.insert(b,string.format("%d%%",a))end;local function c()local a=GetResourceKvpString("nova_scope_vertical")if a==nil or a==""then return 30 else return tonumber(a)end end;local d={}local c=c()for a=1,100 do table.insert(d,string.format("%d%%",a))end;local e=GetResourceKvpString("nova_scope_enabled")=="true"local f=false;RMenu.Add("scope","main",RageUI.CreateMenu("","Scope Settings",1300,100,"banners","scope"))RageUI.CreateWhile(1.0,true,function()if RageUI.Visible(RMenu:Get('scope','main'))then RageUI.DrawContent({header=true,glare=false,instructionalButton=false},function()f=true;RageUI.List("Horizontal Position",b,a,"The horizontal position of the distance text",{},true,function(b,b,c,c)a=c;if b then SetResourceKvp("nova_scope_horizontal",tostring(c))end end)RageUI.List("Vertical Position",d,c,"The vertical position of the distance text",{},true,function(a,a,b,b)c=b;if a then SetResourceKvp("nova_scope_vertical",tostring(b))end end)RageUI.Checkbox("Enabled","Whether the distance should be shown when using a weapon scope",e,{},function(a,a,a,b)e=b;if a then SetResourceKvp("nova_scope_enabled",tostring(b))end end)end)end end)RegisterCommand("scope",function()RageUI.ActuallyCloseAll()RageUI.Visible(RMenu:Get("SettingsMenu","MainMenu"),false)RageUI.Visible(RMenu:Get("scope","main"),true)end)function tNOVA.doesCurrentWeaponHaveScope()local a=PlayerPedId()local b=GetCurrentPedWeaponEntityIndex(a)if b==0 then return false end;local c={"component_at_scope_large","component_at_scope_large_mk2","component_at_scope_max","component_at_scope_large_fixed_zoom","component_at_scope_large_fixed_zoom_mk2"}for a,a in ipairs(c)do if HasWeaponGotWeaponComponent(b,a)then return true end end;local b=GetSelectedPedWeapon(a)local c=GetWeapontypeGroup(b)local a=GetPedAmmoTypeFromWeapon(a,b)if c==-1212426201 then return true end;return false end;local function b(a)local a=vector3(math.pi/180*a.x,math.pi/180*a.y,math.pi/180*a.z)local a=vector3(-math.sin(a.z)*math.abs(math.cos(a.x)),math.cos(a.z)*math.abs(math.cos(a.x)),math.sin(a.x))return a end;local function d()local a=GetGameplayCamCoord()local c=GetGameplayCamRot(2)local b=b(c)local b=a+b*500.0;local b=StartExpensiveSynchronousShapeTestLosProbe(a.x,a.y,a.z,b.x,b.y,b.z,-1,PlayerPedId(),4)local b,b,b,c,c=GetShapeTestResult(b)return#(a-b)end;Citizen.CreateThread(function()while true do Citizen.Wait(0)if e and(f or tNOVA.doesCurrentWeaponHaveScope())then if f then f=RageUI.Visible(RMenu:Get("scope","main"))end;local b=math.round(d(),0)DrawAdvancedText(a/100.0,1.0-c/100.0,0.1,0.002,0.4,string.format("%dm",b),255,255,255,255,0,0)end end end)