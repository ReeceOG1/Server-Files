--NOVA Studios



RMenu.Add('AAMenu','main',RageUI.CreateMenu("","~y~AA ~w~Menu",1300,100,"banners","autoshop"))RageUI.CreateWhile(1.0,true,function()if RageUI.Visible(RMenu:Get('AAMenu','main'))then RageUI.DrawContent({header=true,glare=false,instructionalButton=false},function()RageUI.Button("Fix Vehicle",nil,{RightLabel='→→→'},true,function(a,a,a)if a then TomFix()end end)RageUI.Button("Clean Vehicle",nil,{RightLabel='→→→'},true,function(a,a,a)if a then TomClean()end end)RageUI.Button("Tow/Untow Vehicle",nil,{RightLabel='→→→'},true,function(a,a,a)if a then TriggerEvent("tow")end end)end)end end)RegisterCommand('aamenu',function()TriggerServerEvent('NOVA:openAAMenu')end)function tNOVA.openAAMenu()RageUI.Visible(RMenu:Get('AAMenu','main'),not RageUI.Visible(RMenu:Get('AAMenu','main')))end;function TomFix(a)local a=GetPlayerPed(-1)if IsPedInAnyVehicle(a)then local a=GetVehiclePedIsIn(a)SetVehicleEngineHealth(a,9999)SetVehiclePetrolTankHealth(a,9999)SetVehicleFixed(a)Notify('~y~[AA] ~w~Vehicle has been fixed.')else Notify('~r~You are not in a vehicle!')end end;function TomClean()local a=GetPlayerPed(-1)if IsPedInAnyVehicle(a,false)then local a=GetVehiclePedIsIn(a,false)SetVehicleDirtLevel(a,0)Notify("~y~[AA] ~w~Vehicle has been cleaned.")else Notify("~r~You are not in a vehicle!")end end;function Notify(a)SetNotificationTextEntry("STRING")AddTextComponentString(a)DrawNotification(false,false)end;local a={['flatbed']={x=0.0,y=-0.85,z=0.85}}local b=false;local c=false;local d=false;local e=false;local f=true;local g=nil;function isTargetVehicleATrailer(a)if GetVehicleClassFromName(a)==11 then return true else return false end end;local h=0.0;local i=0.0;local j=0.0;function isVehicleATowTruck(b)local c=false;for a,d in pairs(a)do if IsVehicleModel(b,a)then h=d.x;i=d.y;j=d.z;c=true;break end end;return c end;RegisterNetEvent('tow')AddEventHandler('tow',function()local a=PlayerPedId()local k=GetVehiclePedIsIn(a,true)local l=isVehicleATowTruck(k)if l then local m=GetEntityCoords(a,1)local n=GetOffsetFromEntityInWorldCoords(a,0.0,5.0,0.0)local m=getVehicleInDirection(m,n)Citizen.CreateThread(function()while true do Citizen.Wait(0)l=isVehicleATowTruck(k)local a=GetEntityRoll(GetVehiclePedIsIn(PlayerPedId(),true))if IsEntityUpsidedown(GetVehiclePedIsIn(PlayerPedId(),true))and l or a>70.0 or a<-70.0 then DetachEntity(g,false,false)g=nil end end end)if g==nil then if m~=0 then local l=GetEntityCoords(m,true)local n=GetEntityCoords(k,true)local l=GetDistanceBetweenCoords(l,n,false)if l>15.0 then Notify("~y~[AA] ~w~Move your tow truck closer to the vehicle.")else local l=GetEntityModel(m)if not((not b and IsThisModelABoat(l))or(not d and IsThisModelAHeli(l))or(not c and IsThisModelAPlane(l))or(not e and IsThisModelATrain(l))or(not f and isTargetVehicleATrailer(l)))then if not IsPedInAnyVehicle(a,true)then if k~=m and IsVehicleStopped(k)then AttachEntityToEntity(m,k,GetEntityBoneIndexByName(k,'bodyshell'),0.0+h,-1.5+i,0.0+j,0,0,0,1,1,0,1,0,1)g=m;Notify("~y~[AA] ~w~Vehicle has been loaded onto the Tow Truck.")else Notify("~y~[AA] ~w~There is currently no vehicle on the Tow Truck.")end else Notify("~y~[AA] ~w~You need to be outside of your vehicle to load or unload vehicles.")end else Notify("~y~[AA] ~w~Your tow truck is not equipped to tow this vehicle.")end end else Notify("~y~[AA] ~w~No towable vehicle detected.")end elseif IsVehicleStopped(k)then DetachEntity(g,false,false)local a=GetOffsetFromEntityInWorldCoords(k,0.0,-12.0,0.0)SetEntityCoords(g,a["x"],a["y"],a["z"],1,0,0,1)SetVehicleOnGroundProperly(g)g=nil;Notify("~y~[AA] ~w~Vehicle has been unloaded from the Tow Truck.")end else Notify("~y~[AA] ~w~Your vehicle is not registered as an official tow truck.")end end)function getVehicleInDirection(a,b)local a=CastRayPointToPoint(a.x,a.y,a.z,b.x,b.y,b.z,10,PlayerPedId(),0)local a,a,a,a,a=GetRaycastResult(a)return a end