--NOVA Studios



local a=module("cfg/atms")local b=false;RMenu.Add('NOVAATM','main',RageUI.CreateMenu("","~b~Cash Point",1300,100,"banners","atm"))RageUI.CreateWhile(1.0,true,function()if RageUI.Visible(RMenu:Get('NOVAATM','main'))then RageUI.DrawContent({header=true,glare=false,instructionalButton=true},function()RageUI.Button("Deposit","",{RightLabel='→→→'},true,function(a,a,a)if a then tNOVA.playAnim(false,{{"amb@prop_human_atm@male@exit","exit"}},false)AddTextEntry('FMMC_MPM_NC',"Enter amount to deposit")DisplayOnscreenKeyboard(1,"FMMC_MPM_NC","","","","","",30)while(UpdateOnscreenKeyboard()==0)do DisableAllControlActions(0)Wait(0)end;if(GetOnscreenKeyboardResult())then local a=GetOnscreenKeyboardResult()if a then b=true;a=tonumber(a)TriggerServerEvent('NOVA:Deposit',a)Wait(3000)b=false end end end end)RageUI.Button("Withdraw","",{RightLabel='→→→'},true,function(a,a,a)if a then tNOVA.playAnim(false,{{"amb@prop_human_atm@male@exit","exit"}},false)AddTextEntry('FMMC_MPM_NC',"Enter amount to withdraw")DisplayOnscreenKeyboard(1,"FMMC_MPM_NC","","","","","",30)while(UpdateOnscreenKeyboard()==0)do DisableAllControlActions(0)Wait(0)end;if(GetOnscreenKeyboardResult())then local a=GetOnscreenKeyboardResult()if a then b=true;a=tonumber(a)TriggerServerEvent('NOVA:Withdraw',a)Wait(3000)b=false end end end end)RageUI.Button("Deposit All","",{RightLabel='→→→'},true,function(a,a,a)if a then tNOVA.playAnim(false,{{"amb@prop_human_atm@male@exit","exit"}},false)TriggerServerEvent("NOVA:DepositAll")end end)RageUI.Button("Withdraw All","",{RightLabel='→→→'},true,function(a,a,a)if a then tNOVA.playAnim(false,{{"amb@prop_human_atm@male@exit","exit"}},false)TriggerServerEvent("NOVA:WithdrawAll")end end)end)end end)Citizen.CreateThread(function()while true do Citizen.Wait(0)if b then DisableAllControlActions(0)end end end)Citizen.CreateThread(function()for a,a in pairs(a.atmblips)do local a,b,c=a[1],a[2],a[3]local a=AddBlipForCoord(a,b,c)SetBlipSprite(a,272)SetBlipDisplay(a,4)SetBlipScale(a,0.7)SetBlipColour(a,2)SetBlipAsShortRange(a,true)AddTextEntry("MAPBLIP",'ATMs')BeginTextCommandSetBlipName("MAPBLIP")EndTextCommandSetBlipName(a)SetBlipCategory(a,1)end end)Citizen.CreateThread(function()while true do Wait(0)for a,a in pairs(a.atms)do local a,b,c=a[1],a[2],a[3]DrawMarker(29,a,b,c,0.0,0.0,0.0,0.0,0.0,0.0,0.6,0.6,0.6,00,255,00,50,true,false,2,true,nil,nil,false)end end end)local b=false;local c=false;Citizen.CreateThread(function()while true do Wait(250)c=false;local d=PlayerPedId()local d=GetEntityCoords(d)for a,a in pairs(a.atms)do local a,b,e=a[1],a[2],a[3]if#(d-vec3(a,b,e))<=1.0 then c=true;break end end;if not b and c then b=true;RageUI.Visible(RMenu:Get('NOVAATM','main'),true)end;if b and not c then b=false;RageUI.Visible(RMenu:Get('NOVAATM','main'),false)end end end)